var discordWidget=discordWidget||(function(){var c={};return{init:function(e){e.serverId=typeof e.serverId!=="undefined"?e.serverId:false;e.title=typeof e.title!=="undefined"?e.title:false;e.join=typeof e.join!=="undefined"?e.join:true;e.alphabetical=typeof e.alphabetical!=="undefined"?e.alphabetical:false;e.theme=typeof e.theme!=="undefined"?e.theme:"light";e.hideChannels=typeof e.hideChannels!=="undefined"?e.hideChannels:false;c.serverId=e.serverId;c.title=e.title;c.join=e.join;c.alphabetical=e.alphabetical;c.theme=e.theme;c.hideChannels=e.hideChannels},render:function(){if(c.theme=="dark"){b("http://discord.knightsoftheblade.com/dark.min.css","css")}else{b("http://discord.knightsoftheblade.com/light.min.css","css")}var e="http://discordapp.com/api/servers/"+c.serverId+"/embed.json";var f=new XMLHttpRequest();f.onreadystatechange=function(){if(f.readyState==4&&f.status==200){var g=JSON.parse(f.responseText);d(g,c)}};f.open("GET",e,true);f.send()}};function a(f,e){if(f.position<e.position){return -1}if(f.position>e.position){return 1}return 0}function d(s,g){var t=document.getElementsByClassName("discord-widget")[0];var u='<ul class="discord-tree"></ul><p class="discord-users-online"></p><p class="discord-join"></p><div class="discord-fade"></div>';var n="";var k="";var e,q,r;var o,f,h;if(g.title!==false){t.innerHTML='<div class="discord-title"><h3>'+g.title+"</h3></div>"+u;e=document.getElementsByClassName("discord-tree")[0]}else{t.innerHTML=u;e=document.getElementsByClassName("discord-tree")[0];e.style.marginTop="0"}q=document.getElementsByClassName("discord-users-online")[0];r=document.getElementsByClassName("discord-join")[0];if(g.alphabetical){o=[];for(var m=0;m<s.channels.length;m++){h=false;for(var l=0;l<g.hideChannels.length;l++){if(s.channels[m].name.includes(g.hideChannels[l])){h=true}}if(!h){o.push(s.channels[m])}}for(var m=0;m<o.length;m++){n+='<li class="discord-channel">'+o[m].name+'</li><ul class="discord-userlist">';for(var l=0;l<s.members.length;l++){k="";if(s.members[l].game){k=" - "+s.members[l].game.name}if(s.members[l].channel_id==o[m].id){if(s.members[l].status!="online"){n+='<li class="discord-user"><img src="'+s.members[l].avatar_url+'" class="discord-avatar"/><div class="discord-user-status discord-idle"></div>'+s.members[l].username+"<span>"+k+"</span></li>"}else{n+='<li class="discord-user"><img src="'+s.members[l].avatar_url+'" class="discord-avatar"/><div class="discord-user-status discord-online"></div>'+s.members[l].username+"<span>"+k+"</span></li>"}}}n+="</ul>"}}else{o=[];for(var m=0;m<s.channels.length;m++){h=false;for(var l=0;l<g.hideChannels.length;l++){if(s.channels[m].name.includes(g.hideChannels[l])){h=true}}if(!h){o.push(s.channels[m])}}o.sort(a);for(var m=0;m<o.length;m++){n+='<li class="discord-channel">'+o[m].name+'</li><ul class="discord-userlist">';for(var l=0;l<s.members.length;l++){k="";if(s.members[l].game){k=" - "+s.members[l].game.name}if(s.members[l].channel_id==o[m].id){if(s.members[l].status!="online"){n+='<li class="discord-user"><img src="'+s.members[l].avatar_url+'" class="discord-avatar"/><div class="discord-user-status discord-idle"></div>'+s.members[l].username+"<span>"+k+"</span></li>"}else{n+='<li class="discord-user"><img src="'+s.members[l].avatar_url+'" class="discord-avatar"/><div class="discord-user-status discord-online"></div>'+s.members[l].username+"<span>"+k+"</span></li>"}}}n+="</ul>"}}var v="";if(s.instant_invite!="null"){v='<p class="discord-join"><a href="'+s.instant_invite+'">Join Server</a></p>'}e.innerHTML=n;q.innerHTML="Users Online: "+s.members.length;if(g.join){r.innerHTML=v}else{r.style.display="none"}}function b(e,f){if(f=="css"){var g=document.createElement("link");g.setAttribute("rel","stylesheet");g.setAttribute("type","text/css");g.setAttribute("href",e)}if(typeof g!="undefined"){document.getElementsByTagName("head")[0].appendChild(g)}}}());