var discordWidget=discordWidget||(function(){var b={};return{init:function(d){d.serverId=typeof d.serverId!=="undefined"?d.serverId:false;d.title=typeof d.title!=="undefined"?d.title:false;d.join=typeof d.join!=="undefined"?d.join:true;b.serverId=d.serverId;b.title=d.title;b.join=d.join},render:function(){a("http://discord.knightsoftheblade.com/style.min.css","css");var d="http://discordapp.com/api/servers/"+b.serverId+"/embed.json";var e=new XMLHttpRequest();e.onreadystatechange=function(){if(e.readyState==4&&e.status==200){var f=JSON.parse(e.responseText);c(f,b)}};e.open("GET",d,true);e.send()}};function c(o,f){var q=document.getElementsByClassName("discord-widget")[0];var r='<ul class="discord-tree"></ul><p class="discord-users-online"></p><p class="discord-join"></p><div class="discord-fade"></div>';var l="";var g="";var e,m,n;if(f.title!==false){q.innerHTML='<div class="discord-title"><h3>'+f.title+"</h3></div>"+r;e=document.getElementsByClassName("discord-tree")[0]}else{q.innerHTML=r;e=document.getElementsByClassName("discord-tree")[0];e.style.marginTop="0"}var m=document.getElementsByClassName("discord-users-online")[0];var n=document.getElementsByClassName("discord-join")[0];for(var k=0;k<o.channels.length;k++){l+='<li class="discord-channel">'+o.channels[k].name+'</li><ul class="discord-userlist">';for(var h=0;h<o.members.length;h++){g="";if(o.members[h].game){g=" - "+o.members[h].game.name}if(o.members[h].channel_id==o.channels[k].id){if(o.members[h].status!="online"){l+='<li class="discord-user"><img src="'+o.members[h].avatar_url+'" class="discord-avatar"/><div class="discord-user-status discord-idle"></div>'+o.members[h].username+"<span>"+g+"</span></li>"}else{l+='<li class="discord-user"><img src="'+o.members[h].avatar_url+'" class="discord-avatar"/><div class="discord-user-status discord-online"></div>'+o.members[h].username+"<span>"+g+"</span></li>"}}}l+="</ul>"}var s="";if(o.instant_invite!="null"){s='<p class="discord-join"><a href="'+o.instant_invite+'">Join Server</a></p>'}e.innerHTML=l;m.innerHTML="Users Online: "+o.members.length;if(f.join){n.innerHTML=s}else{n.style.display="none"}}function a(d,e){if(e=="css"){var f=document.createElement("link");f.setAttribute("rel","stylesheet");f.setAttribute("type","text/css");f.setAttribute("href",d)}if(typeof f!="undefined"){document.getElementsByTagName("head")[0].appendChild(f)}}}());